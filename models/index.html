<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    
    <link rel="shortcut icon" href="../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Models - Adaptable Configuration Engine</title>
    <link href="../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/highlight.css">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../js/jquery-3.2.1.min.js"></script>
    <script src="../js/bootstrap-3.3.7.min.js"></script>
    <script src="../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "Models", url: "#_top", children: [
              {title: "Top-level structure", url: "#top-level-structure" },
              {title: "Inheritance", url: "#inheritance" },
              {title: "Paths", url: "#paths" },
              {title: "Triggers", url: "#triggers" },
          ]},
        ];

    </script>
    <script src="../js/base.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../types/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../types/" class="btn btn-xs btn-link">
        Types
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href=".." class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href=".." class="btn btn-xs btn-link">
        Home
      </a>
    </div>
    
  </div>

    

    <h1 id="models">Models</h1>
<h2 id="top-level-structure">Top-level structure</h2>
<p>Models are JSON objects that contain three entries: <code>header</code>, <code>body</code> and <code>templates</code>. The <code>header</code> entry contains information about the model, such as its author's name and e-mail, the its version string, and a line of documentation explaining the model's purpose. The <code>body</code> entry contains the definitions of the options expected by the model. The <code>templates</code> entry contains type definitions that can be injected into the model based on instance values. This injection is supported for options of type <code>select</code>.</p>
<pre><code class="language-json">&quot;header&quot;: {
  &quot;package&quot;: [ &quot;my&quot;, &quot;package&quot; ],
  &quot;author&quot;: { &quot;name&quot;: &quot;John Doe&quot;, &quot;email&quot;: &quot;jdoe@acme.com&quot; },
  &quot;version&quot;: &quot;1.0&quot;,
  &quot;namespace&quot;: [ &quot;my&quot;, &quot;ns&quot; ],
  &quot;doc&quot;: &quot;ACME configuration model&quot;
}
</code></pre>
<p>The <code>package</code> and <code>namespace</code> entries are related to C++ code generation. The <code>package</code> entry defines the compilation unit path of the configuration model. The compilation subsystem must provide an include path the can resolve the package path. The <code>namespace</code> entry defines the namespace to use for the generated classes.</p>
<h2 id="inheritance">Inheritance</h2>
<p>A model can extend external pre-existing models. When extending models, the options defined in these models are imported and merged in the newly defined models. Extended models can in turns extend models themselves. To extends from existing models, a model need to declare path and name of extended models in its headers using the <code>include</code> clause as follows:</p>
<pre><code>"header": {
  "name": "ACME_EX",
  "author": { "name": "John Doe", "email": "jdoe@acme.com" },
  "version": "1.0",
  "include": [ "a_path/a_model.json", ... ],
  "doc": "ACME_EX configuration model"
}
</code></pre>
<p>Multiple extended models may be defining options that bear the same name. In that case, ACE checks if the option types are compatible by kind, arity, and dependencies. If the types are compatible, the options are merged into one. If the types conflict ACE warns the user of the conflicts. Thanks to the flexibility of C++, ACE can merge options of type <code>class</code> if either the declared model are identical, or if one of the model is a direct descendent of the other.</p>
<h2 id="paths">Paths</h2>
<p>ACE uses the <a href="http://goessner.net/articles/JsonPath">JSONPath</a> notation to represent paths.</p>
<h2 id="triggers">Triggers</h2>
<p>Models that are supposed to work in conjunction with plugin types can declare "trigger" patterns that will be used to load them depending on the option path in the instance.</p>
<pre><code class="language-json">&quot;header&quot;: {
  &quot;name&quot;: &quot;ACME_EX&quot;,
  &quot;author&quot;: { &quot;name&quot;: &quot;John Doe&quot;, &quot;email&quot;: &quot;jdoe@acme.com&quot; },
  &quot;version&quot;: &quot;1.0&quot;,
  &quot;include&quot;: [ &quot;plugin/base/model.json&quot;, ... ],
  &quot;trigger&quot;: [ &quot;$.*.acme&quot;, ... ],
  &quot;doc&quot;: &quot;ACME_EX configuration model&quot;
}
</code></pre>
<p>In the above example, the defined trigger allow that model to be loaded when the path match <code>$.*.acme</code> and the plugin use <code>plugin/base/model.json</code> as a base model. The path matched by the trigger is the full JSON path of the option instance.</p>

  <br>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../types/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../types/" class="btn btn-xs btn-link">
        Types
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href=".." class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href=".." class="btn btn-xs btn-link">
        Home
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="container-fluid wm-page-content">
  <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>